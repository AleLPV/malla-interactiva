:root{
  --bg:#f6f5fb;
  --text:#222;
  --primary:#5e35b1;      /* barra progreso */
  --card:#d9d2f1;
  --sem-header:#5d46c7;

  --ob:#d1c4e9; --ob-hover:#b39ddb; --ob-done:#9575cd;
  --eh:#b3e5fc; --eh-hover:#81d4fa; --eh-done:#0288d1;
  --ee:#f8bbd0; --ee-hover:#f48fb1; --ee-done:#e75dfc;

  --curso-border: transparent;     /* borde personalizable */
  --cursando-outline:#f5a623;      /* contorno “cursando” */
  --font-size:16px;                /* tamaño base */
}

*{box-sizing:border-box}
body{
  font-family: var(--font-family,'Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif');
  font-size: var(--font-size);
  background:var(--bg);
  color:var(--text);
  margin:0; padding:20px;
}

/* Topbar */
.topbar{display:flex; align-items:center; justify-content:space-between; gap:1rem; flex-wrap:wrap}
.topbar h1{color:#6f4ef6; margin:0; text-transform:uppercase; letter-spacing:.5px}
.actions{display:flex; gap:.5rem; align-items:center}
.actions button{background:#512da8; color:#fff; border:none; padding:.6rem .9rem; border-radius:8px; cursor:pointer}
.actions button:hover{background:#311b92}
.switch{display:flex; gap:.5rem; align-items:center; padding:.4rem .6rem; border:1px solid #ccc; border-radius:8px; background:#fff}

/* Malla */
#malla{display:flex; justify-content:center; flex-wrap:wrap; gap:20px; margin-top:1rem}
.semestre{background:var(--card); border-radius:12px; padding:10px; width:260px; box-shadow:0 2px 10px rgba(0,0,0,.06)}
.semestre h2{background:var(--sem-header); color:#fff; padding:10px; margin:0 -10px 10px; border-radius:12px 12px 0 0}

/* Cursos */
.curso{
  margin:6px 0; padding:9px; border-radius:8px; cursor:pointer; position:relative;
  transition:transform .1s ease, box-shadow .2s ease;
  border:1px solid var(--curso-border);
}
.curso:hover{transform:translateY(-1px); box-shadow:0 3px 10px rgba(0,0,0,.08)}
.obligatorio{background:var(--ob)}
.obligatorio:hover{background:var(--ob-hover)}
.obligatorio.completado{background:var(--ob-done); color:#fff; text-decoration:line-through}
.eh{background:var(--eh)}
/* ==== Mejora visual: oscurecer completados ==== */
.curso.completado{
  filter: grayscale(30%) brightness(0.85);
  opacity: 0.9;
}
.eh:hover{background:var(--eh-hover)}
.eh.completado{background:var(--eh-done); color:#fff; text-decoration:line-through}
.ee{background:var(--ee)}
.ee:hover{background:var(--ee-hover)}
.ee.completado{background:var(--ee-done); color:#fff; text-decoration:line-through}

/* Cursando */
.curso.cursando{outline:2px dashed var(--cursando-outline); outline-offset:2px}
.curso.cursando::after{content:"Cursando"; position:absolute; top:6px; right:8px; font-size:11px; background:#0001; padding:2px 6px; border-radius:6px}

/* Tooltip */
.tooltip{display:none; position:absolute; top:100%; left:0; background:#fff; border:1px solid #ddd; padding:6px; margin-top:5px; font-size:12px; white-space:pre-wrap; text-align:left; z-index:10; width:100%; border-radius:6px; box-shadow:0 2px 6px rgba(0,0,0,.08)}
.curso:hover .tooltip{display:block} 

```css
/* ==== Fix: Tooltips siempre adelante ==== */
.semestre{ overflow: visible; }
.curso{ position: relative; z-index: 0; }
.curso:hover{ z-index: 100; }
.tooltip{ z-index: 9999; }

/* Paneles */
.creditos-container{display:flex; flex-wrap:wrap; gap:2rem; margin-top:2rem}
.cuadro-obligatorios,.cuadro-ee{flex:1; min-width:300px; border:2px solid #e5e5e5; border-radius:12px; padding:1rem; background:#fff}
.cuadro-obligatorios h3,.cuadro-ee h3{margin:.2rem 0 1rem}
#creditos-list{list-style:none; padding:0; margin:0}
#creditos-list li{padding:.2rem 0}
.total{font-weight:700}
.leyenda-ee{font-size:.9rem; color:#000}

/* Progreso */
.progreso{margin-top:1.5rem}
.barra{background:#eee; border-radius:20px; overflow:hidden; height:20px}
#barra-progreso{background:var(--primary); height:100%; width:0%; transition:width .5s}
.porcentaje{text-align:right; font-size:.9rem; margin-top:.3rem}

/* Botón flotante */
.theme-btn{
  position:fixed; right:16px; bottom:16px; width:48px; height:48px;
  border-radius:50%; border:2px solid #fff; box-shadow:0 4px 14px rgba(0,0,0,.18);
  cursor:pointer; padding:0; background:#512da8;
}
.theme-btn.color-wheel{
  background: conic-gradient(#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);
}
.theme-btn:hover{transform:translateY(-1px)}

/* Overlay / Panel -> respetan [hidden] */
.theme-overlay,
.theme-panel{ display:none; }                 /* ocultos por defecto */

.theme-overlay:not([hidden]){ display:block !important; }
.theme-panel:not([hidden]) { display:grid !important; }

.theme-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.2); backdrop-filter:saturate(140%) blur(2px); }
.theme-panel{
  position:fixed; right:16px; bottom:74px; width:300px; padding:12px;
  background:#fff; border:1px solid #ddd; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.18);
  gap:.6rem;
}
.theme-panel h4{margin:.2rem 0 .4rem}
.theme-panel .grp{border:1px dashed #e5e5e5; border-radius:10px; padding:.6rem; display:grid; gap:.4rem}
.theme-panel label{display:flex; align-items:center; justify-content:space-between; gap:.6rem; font-size:.92rem}
.theme-panel input[type="url"], .theme-panel select{width:100%}
.theme-panel .panel-actions{display:flex; gap:.5rem; justify-content:flex-end}
.theme-panel .panel-actions button{background:#eee; border:1px solid #ddd; border-radius:8px; padding:.4rem .6rem; cursor:pointer}
.theme-panel .hint{margin:0; font-size:.78rem; opacity:.7}

/* Print */
@media print{
  body{background:#fff; padding:0}
  .topbar, .theme-btn, .theme-panel, .theme-overlay{display:none !important}
  .creditos-container{break-inside:avoid}
  .semestre{page-break-inside:avoid}
}
